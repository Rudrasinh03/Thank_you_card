<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>AR Thank You Premium View</title>

Â  Â  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
Â  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

Â  <style>
Â  Â  html, body {
Â  Â  Â  margin: 0;
Â  Â  Â  height: 100%;
Â  Â  Â  overflow: hidden;
Â  Â  Â  background: transparent;
Â  Â  }

Â  Â  .hearts-container {
Â  Â  Â  position: fixed;
Â  Â  Â  inset: 0;
Â  Â  Â  pointer-events: none;
Â  Â  Â  z-index: 9998;
Â  Â  Â  overflow: hidden;
Â  Â  }

Â  Â  .heart {
Â  Â  Â  position: absolute;
Â  Â  Â  bottom: -30px;
Â  Â  Â  font-size: 20px;
Â  Â  Â  opacity: 0.8;
Â  Â  Â  filter: drop-shadow(0 0 6px rgba(255,0,100,0.8));
Â  Â  Â  animation: floatUp linear forwards;
Â  Â  }

    /* FIX 2: Corrected viewport units to stable pixel units for the heart animation */
Â  Â  @keyframes floatUp {
Â  Â  Â  0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0.3; }
Â  Â  Â  50% { transform: translateY(-500px) scale(1.4) rotate(180deg); opacity: 0.7; }
Â  Â  Â  100% { transform: translateY(-1000px) scale(1.2) rotate(360deg); opacity: 0; }
Â  Â  }

Â  Â  #share {
Â  Â  Â  display: none;
Â  Â  Â  position: fixed;
Â  Â  Â  bottom: -100px;
Â  Â  Â  left: 50%;
Â  Â  Â  transform: translateX(-50%);
Â  Â  Â  z-index: 9999;
Â  Â  Â  color: #fff;
Â  Â  Â  font-family: 'Poppins', sans-serif;
Â  Â  Â  background: rgba(0, 0, 0, 0.5);
Â  Â  Â  padding: 14px 20px;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  backdrop-filter: blur(8px);
Â  Â  Â  box-shadow: 0 0 10px rgba(0,0,0,0.4);
Â  Â  Â  text-align: center;
Â  Â  Â  animation: slideUp 0.8s ease-out forwards;
Â  Â  }

Â  Â  #share p {
Â  Â  Â  margin: 0 0 6px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  font-size: 15px;
Â  Â  }

Â  Â  #share a {
Â  Â  Â  color: white;
Â  Â  Â  padding: 6px 12px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  Â  text-decoration: none;
Â  Â  Â  transition: transform 0.2s;
Â  Â  }

Â  Â  #share a:hover { transform: scale(1.1); }
Â  Â  #shareFb { background: #1877F2; }
Â  Â  #shareWa { background: #25D366; }
Â  Â  #reviewLink { background: #FF9500; }

Â  Â  @keyframes slideUp {
Â  Â  Â  from { bottom: -100px; opacity: 0; }
Â  Â  Â  to { bottom: 18px; opacity: 1; }
Â  Â  }
Â  </style>
</head>
<body>
Â  Â  <div class="hearts-container" id="hearts"></div>

Â  Â  <div id="share">
Â  Â  <p>ðŸ’¬ Share or Review:</p>
Â  Â  <div style="display:flex; justify-content:center; gap:12px; flex-wrap:wrap;">
Â  Â  Â  <a id="shareFb" href="#" target="_blank">Facebook</a>
Â  Â  Â  <a id="shareWa" href="#" target="_blank">WhatsApp</a>
Â  Â  Â  <a id="reviewLink" href="#" target="_blank">Leave a Review</a>
Â  Â  </div>
Â  </div>

Â  Â  <a-scene
Â  Â  mindar-image="imageTargetSrc: targets (1).mind; autoStart: true; filterMinCF: 0.001; filterBeta: 0.05;"
Â  Â  embedded
Â  Â  color-space="sRGB"
Â  Â  renderer="alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: true;"
Â  Â  vr-mode-ui="enabled: false"
Â  >
Â  Â  <a-assets>
Â  Â  Â  <video id="juiceVideo" src="thank_you.mp4" preload="auto" playsinline webkit-playsinline autoplay muted loop crossorigin="anonymous"></video>
Â  Â  </a-assets>

Â  Â  <a-camera position="0 0 0" look-controls="false"></a-camera>

    <a-entity mindar-image-target="targetIndex: 0" rotation="90 0 0">
        
        Â  Â      <a-plane id="videoPlane"
Â  Â  Â  Â  Â position="0 0 0" 
Â  Â  Â  Â  Â rotation="0 0 0"
Â  Â  Â  Â  Â visible="false"
Â  Â  Â  Â  Â material="shader: flat; src: #juiceVideo;">
        </a-plane>
        
    </a-entity>
Â  </a-scene>

Â  <script>
Â  Â  const scene = document.querySelector('a-scene');
Â  Â  const video = document.querySelector('#juiceVideo');
Â  Â  const plane = document.getElementById('videoPlane');
Â  Â  const heartsContainer = document.getElementById('hearts');
Â  Â  const share = document.getElementById('share');
Â  Â  let heartInterval = null;
Â  Â  let showShareTimeout = null;

Â  Â  video.addEventListener('loadedmetadata', () => {
Â  Â  Â  const aspect = video.videoWidth / video.videoHeight;
Â  Â  Â  const videoWidth = 1.2;
Â  Â  Â  const videoHeight = videoWidth / aspect;
Â  Â  Â  
Â  Â  Â  plane.setAttribute('width', videoWidth);
Â  Â  Â  plane.setAttribute('height', videoHeight);

Â  Â  Â  // Position fix to place the video plane on top of the target image
Â  Â  Â  // Y-Offset = (Target Half-Height: 0.5) + (Video Plane Half-Height)
Â  Â  Â  const yOffset = 0.5 + (videoHeight / 2);

Â  Â  Â  // Since the target is rotated 90 deg on X, the Y-axis (height) in the plane
      // now corresponds to the Z-axis (depth/forward) in the world.
      // So, the vertical offset must be applied to the Z coordinate of the plane.
      // However, we want the video *above* the target, which is the Y-axis *before* rotation.
      // Let's rely on the coordinate system for the rotated target:
      // The Y-axis (height) is still what we use to position content *above* the target plane.
      // Let's correct the Z position to make it stand slightly off the target for better viewing:
      const zPosition = -0.01; // Tiny offset forward so it doesn't clip the target.

      // FIX 1 CONTINUED: Use Y for vertical offset (above the target plane)
Â  Â  Â  plane.setAttribute('position', `0 ${yOffset} ${zPosition}`);
Â  Â  });

Â  Â  function spawnHeart(){
Â  Â  Â  const h = document.createElement('div');
Â  Â  Â  h.className = 'heart';
Â  Â  Â  h.innerText = 'â¤ï¸';
Â  Â  Â  h.style.left = Math.random()*100 + 'vw';
Â  Â  Â  h.style.fontSize = (16 + Math.random()*28) + 'px';
Â  Â  Â  h.style.animationDuration = (5 + Math.random()*4) + 's';
Â  Â  Â  heartsContainer.appendChild(h);
Â  Â  Â  setTimeout(() => h.remove(), 9000);
Â  Â  }

Â  Â  // FIX 3: The stable target entity fixes the video starting every second
Â  Â  scene.addEventListener('targetFound', async () => {
Â  Â  Â  console.log("Target found");
Â  Â  Â  plane.setAttribute('visible', true);

Â  Â  Â  try {
Â  Â  Â  Â  video.muted = true;
Â  Â  Â  Â  await video.play();
Â  Â  Â  Â  setTimeout(()=>video.muted=false, 500);
Â  Â  Â  } catch(e){
Â  Â  Â  Â  console.warn("Autoplay blocked:", e);
Â  Â  Â  }

Â  Â  Â  if(!heartInterval){
Â  Â  Â  Â  spawnHeart();
Â  Â  Â  Â  heartInterval = setInterval(spawnHeart, 800);
Â  Â  Â  }

Â  Â  Â  if(!showShareTimeout){
Â  Â  Â  Â  showShareTimeout = setTimeout(()=>{
Â  Â  Â  Â  Â  share.style.display = 'block';
Â  Â  Â  Â  }, 10000);
Â  Â  Â  }
Â  Â  });

Â  Â  scene.addEventListener('targetLost', () => {
Â  Â  Â  console.log("Target lost");
Â  Â  Â  plane.setAttribute('visible', false);
Â  Â  Â  video.pause();
Â  Â  Â  if(heartInterval){
Â  Â  Â  Â  clearInterval(heartInterval);
Â  Â  Â  Â  heartInterval = null;
Â  Â  Â  }
Â  Â  Â  if(showShareTimeout){
Â  Â  Â  Â  clearTimeout(showShareTimeout);
Â  Â  Â  Â  showShareTimeout = null;
Â  Â  Â  }
Â  Â  Â  share.style.display = 'none';
Â  Â  });

Â  Â  video.addEventListener('ended', () => {
Â  Â  Â  share.style.display = 'block';
Â  Â  Â  if(heartInterval){
Â  Â  Â  Â  clearInterval(heartInterval);
Â  Â  Â  Â  heartInterval = null;
Â  Â  Â  }
Â  Â  });

Â  Â  // âœ… Replace with your real links
Â  Â  document.getElementById('shareFb').href = "https://facebook.com/yourpage";
Â  Â  document.getElementById('shareWa').href = "https://wa.me/?text=Hey!%20I%20just%20loved%20your%20product!";
Â  Â  document.getElementById('reviewLink').href = "https://yourshop.com/review";
Â  </script>
</body>
</html>
